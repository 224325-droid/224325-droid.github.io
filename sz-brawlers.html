<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SZ Brawlers - Avatar Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brawl-blue': '#1099E7',
              'brawl-yellow': '#FFD86B',
              'brawl-purple': '#9B3CFF',
              'brawl-red': '#F32757',
              'brawl-green': '#5FAF26',
              'dark-bg': '#16171B',
              'card-bg': '#272A36',
              'card-bg-light': '#32364A',
            },
          },
        },
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/save-svg-as-png@1.4.17/lib/saveSvgAsPng.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="./brawlers.css" rel="stylesheet" />
  </head>
  <body class="p-4 md:p-8">
    <!-- Animated Avatar Background -->
    <div class="avatar-background"></div>

    <div class="container mx-auto max-w-6xl">
      <h1 class="text-4xl md:text-5xl font-bold text-center mb-8 brawl-title">SZ BRAWLERS</h1>
      <p class="text-center mb-10 text-brawl-yellow opacity-80">
        Create your own custom Brawl Stars inspired character!
      </p>

      <div class="grid md:grid-cols-3 gap-8">
        <!-- Column 1: SVG Preview -->
        <div class="md:col-span-1 brawl-card p-6 flex flex-col items-center">
          <h2 class="text-2xl font-semibold mb-6 brawl-title">Brawler Preview</h2>
          <div class="brawler-svg-preview mb-6">
            <svg id="brawlerPreviewSVG" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
              <!-- SVG content will be dynamically inserted here -->
            </svg>
          </div>
          <button id="randomizeAllBtn" class="mt-4 brawl-btn-accent w-full">RANDOMIZE</button>
        </div>

        <!-- Column 2: Customization Controls -->
        <div class="md:col-span-2 brawl-card p-6 space-y-6">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
            <div>
              <label for="brawlerName">BRAWLER NAME</label>
              <input type="text" id="brawlerName" placeholder="Enter brawler name" />
            </div>
            <div>
              <button id="generateNameBtn" class="brawl-btn-primary w-full mt-5 sm:mt-7">GENERATE NAME</button>
            </div>
          </div>

          <div class="bg-opacity-50 bg-black p-4 rounded-xl">
            <h3 class="text-xl font-semibold text-brawl-yellow mb-4 pb-2 border-b border-gray-700 flex items-center">
              <span class="feature-title-icon mr-2">⚙️</span>
              FEATURES
              <div class="flex-grow ml-2 relative overflow-hidden">
                <div class="title-sparkle"></div>
              </div>
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
              <div>
                <div class="flex items-center mb-3">
                  <label for="headShape" class="flex-grow">HEAD SHAPE</label>
                  <div class="flex space-x-2">
                    <div class="color-control relative" data-tooltip="Skin Tone">
                      <span class="absolute -top-4 left-0 text-xs text-brawl-yellow">SKIN</span>
                      <input type="color" id="skinTone" value="#F5D5A9" class="w-8 h-8" />
                    </div>
                    <div class="color-control relative" data-tooltip="Outline Color">
                      <span class="absolute -top-4 left-0 text-xs text-brawl-yellow">OUTLINE</span>
                      <input type="color" id="outlineColor" value="#000000" class="w-8 h-8" />
                    </div>
                  </div>
                </div>
                <div id="headShapeVisualSelector" class="visual-selector-grid" data-tooltip-category="Head Shape">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="headShape" class="hidden"></select>
                <div class="mt-3">
                  <div class="flex items-center mb-2">
                    <label for="outlineWidth" class="flex-grow text-sm">OUTLINE WIDTH</label>
                    <div class="text-xs text-brawl-yellow"><span id="outlineWidthValue">0</span>px</div>
                  </div>
                  <input
                    type="range"
                    id="outlineWidth"
                    value="0"
                    min="0"
                    max="5"
                    step="0.1"
                    class="w-full h-8 brawl-slider"
                  />
                </div>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="hairFront" class="flex-grow">HAIR</label>
                  <div class="color-control" data-tooltip="Hair Color">
                    <input type="color" id="hairColor" value="#5D4037" class="w-8 h-8" />
                  </div>
                </div>
                <div id="hairFrontVisualSelector" class="visual-selector-grid" data-tooltip-category="Hair Style">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="hairFront" class="hidden"></select>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="eyeShape" class="flex-grow">EYE SHAPE</label>
                </div>
                <div id="eyeShapeVisualSelector" class="visual-selector-grid" data-tooltip-category="Eye Shape">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="eyeShape" class="hidden"></select>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="pupilShape" class="flex-grow">PUPIL SHAPE</label>
                  <div class="color-control" data-tooltip="Eye Color">
                    <input type="color" id="eyeColor" value="#4CAF50" class="w-8 h-8" />
                  </div>
                </div>
                <div id="pupilShapeVisualSelector" class="visual-selector-grid" data-tooltip-category="Pupil Style">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="pupilShape" class="hidden"></select>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="eyebrowShape" class="flex-grow">EYEBROWS</label>
                </div>
                <div id="eyebrowShapeVisualSelector" class="visual-selector-grid" data-tooltip-category="Eyebrow Style">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="eyebrowShape" class="hidden"></select>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="noseShape" class="flex-grow">NOSE</label>
                </div>
                <div id="noseShapeVisualSelector" class="visual-selector-grid" data-tooltip-category="Nose Style">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="noseShape" class="hidden"></select>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="mouthShape" class="flex-grow">MOUTH</label>
                </div>
                <div id="mouthShapeVisualSelector" class="visual-selector-grid" data-tooltip-category="Mouth Style">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="mouthShape" class="hidden"></select>
              </div>
              <div>
                <div class="flex items-center mb-3">
                  <label for="headwear" class="flex-grow">HEADWEAR</label>
                  <div class="color-control" data-tooltip="Headwear Color">
                    <input type="color" id="clothingColor1" value="#2196F3" class="w-8 h-8" />
                  </div>
                </div>
                <div id="headwearVisualSelector" class="visual-selector-grid" data-tooltip-category="Headwear Style">
                  <!-- Visual options will be dynamically inserted here -->
                </div>
                <select id="headwear" class="hidden"></select>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="createdBrawlerDisplay" class="mt-10">
        <!-- Brawler card will be injected here -->
      </div>
      <div id="discordProfilePreviewContainer" class="mt-12 mb-8">
        <h2 class="text-2xl font-semibold mb-6 text-center brawl-title">Discord Profile Preview</h2>

        <div class="flex flex-col md:flex-row gap-8 items-start justify-center">
          <!-- Discord Profile Card -->
          <div id="discordCard" class="w-full max-w-sm rounded-lg overflow-hidden">
            <!-- Banner -->
            <div id="discordBanner" class="h-24 bg-brawl-blue">
              <!-- Banner content (can be empty or have abstract pattern later) -->
            </div>

            <!-- Avatar & User Info Section -->
            <div class="p-5 relative">
              <!-- Avatar -->
              <div
                id="discordAvatarContainer"
                class="absolute -top-12 left-4 w-24 h-24 rounded-full bg-gray-700 overflow-hidden shadow-lg"
              >
                <!-- The brawler SVG will be injected here -->
                <svg
                  id="discordAvatarSVG"
                  class="w-full h-full"
                  viewBox="0 0 100 100"
                  preserveAspectRatio="xMidYMid meet"
                ></svg>
              </div>

              <!-- Spacer for avatar -->
              <div class="pt-14">
                <h3 id="discordDisplayName" class="text-xl font-bold text-white">Brawler Name</h3>
                <p id="discordUsername" class="text-sm text-gray-400">brawler_name</p>

                <!-- SZ Games Server Affiliation -->
                <div id="szGamesAffiliation" class="mt-4 pt-4 border-t border-gray-700">
                  <h4 class="text-xs uppercase font-semibold text-gray-400 mb-1.5">Playing on SZ Games</h4>
                  <div class="flex items-center space-x-2">
                    <img
                      src="https://github.com/sz-games/home/blob/main/G.png?raw=true"
                      alt="SZ Games Logo"
                      class="w-10 h-10 rounded-md"
                      onerror="this.style.display='none'; this.parentElement.querySelector('.fallback-logo').style.display='block';"
                    />
                    <div
                      class="w-10 h-10 rounded-md bg-gray-600 flex items-center justify-center text-white font-bold text-lg fallback-logo"
                      style="display: none"
                    >
                      SZ
                    </div>
                    <div>
                      <p class="text-sm font-semibold text-white">SZ Games</p>
                      <p class="text-xs text-gray-400">Brawler Avatar Generator</p>
                    </div>
                  </div>
                  <!-- Badge Style -->
                  <div
                    class="mt-2 inline-flex items-center bg-brawl-green text-white text-xs font-semibold px-2.5 py-0.5 rounded-full"
                  >
                    <svg class="w-3 h-3 mr-1.5" fill="currentColor" viewBox="0 0 20 20">
                      <path
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd"
                        fill-rule="evenodd"
                      ></path>
                    </svg>
                    SZ Games Verified
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Controls for Discord Preview -->
          <div class="w-full md:w-auto md:max-w-xs brawl-card p-6 space-y-4">
            <h3 class="text-lg font-semibold text-brawl-yellow mb-3">CUSTOMIZE PREVIEW</h3>
            <div>
              <label for="bannerColor" class="block text-sm font-medium text-brawl-yellow mb-1">BANNER COLOR</label>
              <input type="color" id="bannerColor" value="#1099E7" class="w-full h-10 p-1 rounded-md" />
            </div>
            <p class="text-xs text-gray-400">
              The brawler name and generated avatar will update automatically when you create/randomize a brawler.
            </p>
          </div>
        </div>
      </div>

      <div class="relative">
        <div class="absolute inset-0 bg-gradient-to-r from-brawl-blue to-brawl-purple blur opacity-20"></div>
        <button id="downloadPngBtn" class="w-full brawl-btn-primary py-4 px-4 rounded-lg text-lg relative">
          DOWNLOAD AS PNG
        </button>
      </div>
    </div>

    <script src="./brawlers.js"></script>
  </body>
</html>
